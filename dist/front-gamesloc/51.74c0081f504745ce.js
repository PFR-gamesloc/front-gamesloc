"use strict";(self.webpackChunkfront_gamesloc=self.webpackChunkfront_gamesloc||[]).push([[51],{623:(x,h,a)=>{a.d(h,{v:()=>e});var d=a(553),s=a(5879),f=a(9862),C=a(589);let e=(()=>{var g;class p{constructor(m,i){this.httpClient=m,this.getService=i,this.baseUrl=d.N.baseUrl}addToFavorites(m){return this.httpClient.post(`${this.baseUrl}/customer/me/favs/add`,m)}removeToFavorites(m){return this.httpClient.post(`${this.baseUrl}/customer/me/favs/remove`,m)}modifyCustomer(m){return this.httpClient.put(`${this.baseUrl}/customer/edit`,m)}modifyAddressCustomer(m){return this.httpClient.put(`${this.baseUrl}/customer/edit/address`,m)}postAComment(m){return this.httpClient.post(this.baseUrl+"/customer/comment/add",m)}getOrders(){return this.getService.getData("/customer/me/orders")}getCities(m){return this.getService.getData("/customer/cities/"+m)}}return(g=p).\u0275fac=function(m){return new(m||g)(s.LFG(f.eN),s.LFG(C.t))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),p})()},9034:(x,h,a)=>{a.d(h,{h:()=>e});var d=a(553),s=a(5879),f=a(9862),C=a(589);let e=(()=>{var g;class p{constructor(m,i){this.httpClient=m,this.getService=i,this.selectedGameIdKey="selectedGameId",this.baseUrl=d.N.baseUrl}getGames(){return this.getService.getData(this.baseUrl+"/product/games")}getGameById(m){return this.getService.getData(`/product/game/${m}`)}setSelectedGameId(m){localStorage.setItem(this.selectedGameIdKey,m.toString())}getSelectedGameId(){const m=localStorage.getItem(this.selectedGameIdKey);return m?parseInt(m):void 0}}return(g=p).\u0275fac=function(m){return new(m||g)(s.LFG(f.eN),s.LFG(C.t))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),p})()},721:(x,h,a)=>{a.d(h,{V:()=>g});var d=a(8645),s=a(5619),f=a(553),C=a(5879),e=a(9862);let g=(()=>{var p;class l{constructor(i){this.httpClient=i,this.cartItemsSubject=new d.x,this.totalPrice=new s.X(0),this.baseUrl=f.N.baseUrl}getCartItemsObservable(){return this.cartItemsSubject.asObservable()}emitCartItemsUpdate(){this.updatePrice(),this.cartItemsSubject.next(this.getItems())}addItem(i){const _=this.getItems();return _.some(v=>v.gameId===i.gameId)?{success:!1,message:"Le jeu existe d\xe9j\xe0 dans le panier. Ajout annul\xe9."}:(_.push(i),localStorage.setItem("articles",JSON.stringify(_)),this.emitCartItemsUpdate(),{success:!0,message:"Le jeu a bien \xe9t\xe9 ajouter au panier !"})}getItems(){const i=localStorage.getItem("articles");return i?JSON.parse(i):[]}clearItems(){localStorage.removeItem("articles")}removeItem(i){const _=this.getItems().filter(v=>v.gameId!==i.gameId);localStorage.setItem("articles",JSON.stringify(_)),this.emitCartItemsUpdate()}validateCart(i){return this.httpClient.post(`${this.baseUrl}/customer/me/create-order`,i)}updatePrice(){if(0===this.getItems().length)this.totalPrice.next(0);else{let i=0;for(const _ of this.getItems())i+=_.gamePrice;this.totalPrice.next(i)}}}return(p=l).\u0275fac=function(i){return new(i||p)(C.LFG(e.eN))},p.\u0275prov=C.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),l})()},5631:(x,h,a)=>{a.d(h,{J:()=>C});var d=a(9862),s=a(553),f=a(5879);let C=(()=>{var e;class g{constructor(l){this.http=l,this.baseUrl=s.N.baseUrl}upload(l){const m=new FormData;m.append("file",l);const i=new d.aW("POST",`${this.baseUrl}/admin/game/upload`,m,{reportProgress:!0,responseType:"json"});return this.http.request(i)}getFile(l){return this.http.get(`${this.baseUrl}/product/img/${l}`,{responseType:"blob"})}}return(e=g).\u0275fac=function(l){return new(l||e)(f.LFG(d.eN))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),g})()},8051:(x,h,a)=>{a.d(h,{p:()=>q});var d=a(6814);const s=void 0,C=["fr",[["AM","PM"],s,s],s,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],s,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]],s,[["av. J.-C.","ap. J.-C."],s,["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xe0' {0}",s],[",","\u202f",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[s,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[s,"\xa5"],COP:["$CO","$"],CYP:["\xa3CY"],EGP:[s,"\xa3E"],FJD:["$FJ","$"],FKP:["\xa3FK","\xa3"],FRF:["F"],GBP:["\xa3GB","\xa3"],GIP:["\xa3GI","\xa3"],HKD:[s,"$"],IEP:["\xa3IE"],ILP:["\xa3IL"],ITL:["\u20a4IT"],JPY:[s,"\xa5"],KMF:[s,"FC"],LBP:["\xa3LB","\xa3L"],MTP:["\xa3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[s,"$C"],NZD:["$NZ","$"],PHP:[s,"\u20b1"],RHD:["$RH"],RON:[s,"L"],RWF:[s,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[s,"$T"],TTD:["$TT","$"],TWD:[s,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[s,"$"],XPF:["FCFP"],ZMW:[s,"Kw"]},"ltr",function f(n){const o=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 0===o||1===o?1:0===r&&0!==o&&o%1e6==0&&0===t||!(r>=0&&r<=5)?4:5}];var e=a(5879),g=a(9034),p=a(623),l=a(1896),m=a(721),i=a(589),_=a(304),v=a(9229),T=a(5631),I=a(1538),M=a(8726),b=a(6843);function Z(n,c){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",8)(2,"ngb-rating",9),e.NdJ("rateChange",function(r){e.CHM(o);const u=e.oxw().$implicit;return e.KtG(u.rating=r)}),e.qZA()(),e.BQk()}if(2&n){const o=e.oxw().$implicit;e.xp6(2),e.Q6J("max",5)("rate",o.rating)("readonly",!0)}}function A(n,c){if(1&n&&(e.ynx(0),e.TgZ(1,"div",3)(2,"div",4),e._uU(3),e.YNc(4,Z,3,3,"ng-container",5),e.TgZ(5,"div")(6,"div",6),e._uU(7),e.ALo(8,"date"),e.qZA()()(),e.TgZ(9,"div",7),e._uU(10),e.qZA()(),e.BQk()),2&n){const o=c.$implicit;e.xp6(3),e.hij("",o.customer.firstName+" "+o.customer.lastName," "),e.xp6(1),e.Q6J("ngIf",null!==o.rating),e.xp6(3),e.hij("D\xe9pos\xe9 le ",e.xi3(8,4,o.publishDate,"dd/MM/yyyy"),""),e.xp6(3),e.hij(" ",o.comment," ")}}function S(n,c){if(1&n&&(e.ynx(0),e.YNc(1,A,11,7,"ng-container",2),e.BQk()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.commentaries)}}function U(n,c){1&n&&(e.TgZ(0,"h2"),e._uU(1,"Aucun commentaires pour le moment !"),e.qZA())}let E=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-commentary"]],inputs:{commentaries:"commentaries",gameId:"gameId"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noCommentaries",""],[4,"ngFor","ngForOf"],[1,"commentary"],[1,"nameCommentary"],[4,"ngIf"],[1,"ratingDate"],[1,"contentCommentary"],[1,"rating"],[3,"max","rate","readonly","rateChange"]],template:function(t,r){if(1&t&&(e.YNc(0,S,2,1,"ng-container",0),e.YNc(1,U,2,0,"ng-template",null,1,e.W1O)),2&t){const u=e.MAs(2);e.Q6J("ngIf",r.commentaries.length>0)("ngIfElse",u)}},dependencies:[d.sg,d.O5,M.OC,d.uU],styles:[".commentary[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem;padding:1rem 0rem 1rem 1rem;gap:10px;box-shadow:0 16px 50px 5px #0000001a}.commentary[_ngcontent-%COMP%]   .nameCommentary[_ngcontent-%COMP%]{color:var(--blue-primary);font-family:var(--font-rosario);font-size:1.2rem;padding-bottom:5px}.commentary[_ngcontent-%COMP%]   ngb-rating[_ngcontent-%COMP%]{color:#ffc107;font-size:30px}.commentary[_ngcontent-%COMP%]   .ratingCommentary[_ngcontent-%COMP%]{display:flex;flex-direction:row}.commentary[_ngcontent-%COMP%]   .ratingCommentary[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{padding-right:10px}.commentary[_ngcontent-%COMP%]   .ratingCommentary[_ngcontent-%COMP%]   .notice[_ngcontent-%COMP%]{padding-left:5px}.commentary[_ngcontent-%COMP%]   .ratingCommentary[_ngcontent-%COMP%]   .ratingDate[_ngcontent-%COMP%]{color:red}.commentary[_ngcontent-%COMP%]   .contentCommentary[_ngcontent-%COMP%]{font-family:var(--font-raleway)}"]}),c})();var P=a(6223);let F=(()=>{var n;class c{constructor(t,r,u){this.customerService=t,this.toastr=r,this.router=u}ngOnInit(){this.commentaryForm=new P.cw({comment:new P.NI(""),rating:new P.NI("")})}PostComment(){const t={gameId:this.gameId,comment:this.commentaryForm.get("comment")?.value,rating:this.commentaryForm.get("rating")?.value};this.customerService.postAComment(t).subscribe({next:()=>{this.toastr.success("Commentaire Post\xe9 !"),this.router.navigate(["/"])},error:()=>this.toastr.error("Le commentaire n'a pas pu \xeatre post\xe9")})}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(p.v),e.Y36(v._W),e.Y36(l.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-commentary-form"]],inputs:{gameId:"gameId"},decls:13,vars:3,consts:[[1,"commentary"],[1,"container"],[3,"formGroup","ngSubmit"],["formControlName","rating",3,"max","readonly"],[1,"form-group"],["for","comentaryForm",1,"commentaryTitle"],["id","comentaryForm","rows","3","formControlName","comment","placeholder","Laissez-nous un commentaire...",1,"form-control"],[1,"btn-width"],["textBtn","Comment\xe9 !","classBtn","btn-connexionPage btn"]],template:function(t,r){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"h2"),e._uU(3,"Laissez-nous votre avis !"),e.qZA(),e.TgZ(4,"div",1)(5,"form",2),e.NdJ("ngSubmit",function(){return r.PostComment()}),e._UZ(6,"ngb-rating",3),e.TgZ(7,"div",4)(8,"label",5),e._uU(9,"Votre commentaire"),e.qZA(),e._UZ(10,"textarea",6),e.qZA(),e.TgZ(11,"div",7),e._UZ(12,"app-btn-component",8),e.qZA()()()(),e.BQk()),2&t&&(e.xp6(5),e.Q6J("formGroup",r.commentaryForm),e.xp6(1),e.Q6J("max",5)("readonly",!1))},dependencies:[I.H,M.OC,P._Y,P.Fj,P.JJ,P.JL,P.sg,P.u],styles:["ngb-rating[_ngcontent-%COMP%]{color:#ffc107;font-size:30px}.commentary[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem;padding:1rem 0rem 1rem 1rem;gap:10px;box-shadow:0 16px 50px 5px #0000001a}.commentary[_ngcontent-%COMP%]   .btn-width[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:15px 5px}.commentary[_ngcontent-%COMP%]   .commentaryTitle[_ngcontent-%COMP%]{color:var(--blue-primary);padding:10px}"]}),c})();function D(n,c){if(1&n&&(e.TgZ(0,"div",25)(1,"a",26),e._UZ(2,"ng-icon",27),e.qZA(),e.TgZ(3,"h1",28),e._uU(4),e.qZA()()),2&n){const o=e.oxw(2);e.xp6(4),e.Oqu(o.game.gameName)}}function N(n,c){if(1&n&&(e.TgZ(0,"h1",29),e._uU(1),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.Oqu(o.game.gameName)}}function $(n,c){if(1&n){const o=e.EpF();e.TgZ(0,"ng-icon",32),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(3);return e.KtG(r.addToFavorites(r.game))}),e.qZA()}}function j(n,c){if(1&n){const o=e.EpF();e.TgZ(0,"ng-icon",33),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(3);return e.KtG(r.removeToFavorites(r.game))}),e.qZA()}}function L(n,c){if(1&n&&(e.ynx(0),e.YNc(1,$,1,0,"ng-icon",30),e.YNc(2,j,1,0,"ng-icon",31),e.BQk()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!o.isGameLiked),e.xp6(1),e.Q6J("ngIf",o.isGameLiked)}}function J(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1,"Connectez vous pour lik\xe9 ce jeu !"),e.qZA())}const B=function(n,c,o){return{"in-stock":n,"low-stock":c,"out-of-stock":o}};function w(n,c){if(1&n&&(e.ynx(0,34),e.TgZ(1,"p",15),e._uU(2," Stock : "),e.TgZ(3,"span"),e._uU(4),e.qZA()(),e.BQk()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.kEZ(2,B,o.game.stock>20,o.game.stock<=20,o.game.stock<=10)),e.xp6(3),e.hij(" ",o.game.stock,"")}}function k(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const o=c.$implicit;e.xp6(1),e.hij(" ",o.name," ")}}function Y(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const o=c.$implicit;e.xp6(1),e.hij(" ",o.name," ")}}function G(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const o=c.$implicit;e.xp6(1),e.hij(" ",o.name," ")}}function R(n,c){1&n&&(e.ynx(0),e.TgZ(1,"h2"),e._uU(2,"Connectez vous pour donner votre avis !"),e.qZA(),e.BQk())}function Q(n,c){1&n&&(e.ynx(0),e.TgZ(1,"h2"),e._uU(2,"Commandez ce jeu pour donner votre avis !"),e.qZA(),e.BQk())}function W(n,c){1&n&&(e.ynx(0),e.TgZ(1,"h2"),e._uU(2,"Vous avez d\xe9j\xe0 donner votre opinion sur ce Jeu"),e.qZA(),e.BQk())}function z(n,c){if(1&n&&(e.ynx(0),e._UZ(1,"app-commentary-form",35),e.BQk()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("gameId",o.game.gameId)}}const K=function(n){return[n,"EUR","symbol","2.2-2","fr"]};function H(n,c){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",1),e.YNc(2,D,5,1,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.TgZ(5,"div",5),e.YNc(6,N,2,1,"h1",6),e.YNc(7,L,3,2,"ng-container",7),e.YNc(8,J,2,0,"ng-template",null,8,e.W1O),e.TgZ(10,"span",9),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.YNc(13,w,5,6,"ng-container",10),e.TgZ(14,"span",11)(15,"ngb-rating",12),e.NdJ("rateChange",function(r){e.CHM(o);const u=e.oxw();return e.KtG(u.rating=r)}),e.qZA(),e.TgZ(16,"span",13),e._uU(17),e.qZA()(),e.TgZ(18,"app-btn-component",14),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.addToCart())}),e.qZA()()(),e.TgZ(19,"h2"),e._uU(20,"Description"),e.qZA(),e.TgZ(21,"p",15),e._uU(22),e.qZA(),e.TgZ(23,"h2"),e._uU(24,"Caract\xe9ristiques"),e.qZA(),e.TgZ(25,"div",16)(26,"table",17)(27,"tr")(28,"th",18),e._uU(29,"D\xe9tails du jeu"),e.qZA()(),e.TgZ(30,"tr")(31,"td",19)(32,"p",20),e._uU(33,"Age (\xe0 partir de) :"),e.qZA(),e.TgZ(34,"p",21),e._uU(35),e.qZA(),e.TgZ(36,"p",20),e._uU(37),e.qZA(),e.TgZ(38,"p",21),e._uU(39),e.qZA(),e.TgZ(40,"p",20),e._uU(41,"\xc9diteur :"),e.qZA(),e.TgZ(42,"p",21),e._uU(43),e.qZA()(),e.TgZ(44,"td",22)(45,"p",20),e._uU(46,"Type :"),e.qZA(),e.TgZ(47,"p",21),e._uU(48),e.qZA(),e.TgZ(49,"p",20),e._uU(50),e.qZA(),e.TgZ(51,"p",21),e.YNc(52,k,2,1,"span",23),e.qZA(),e.TgZ(53,"p",20),e._uU(54),e.qZA(),e.TgZ(55,"p",21),e.YNc(56,Y,2,1,"span",23),e.qZA(),e.TgZ(57,"p",20),e._uU(58),e.qZA(),e.TgZ(59,"p",21),e.YNc(60,G,2,1,"span",23),e.qZA()()()()(),e.TgZ(61,"h2"),e._uU(62,"Commentaires"),e.qZA(),e.YNc(63,R,3,0,"ng-container",0),e.YNc(64,Q,3,0,"ng-container",0),e.YNc(65,W,3,0,"ng-container",0),e.YNc(66,z,2,1,"ng-container",0),e._UZ(67,"app-commentary",24),e.qZA(),e.BQk()}if(2&n){const o=e.MAs(9),t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentWindowWidth<768),e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.Q6J("ngIf",t.currentWindowWidth>768),e.xp6(1),e.Q6J("ngIf",t.isConnected())("ngIfElse",o),e.xp6(4),e.Oqu(e.G7q(12,30,e.VKq(36,K,t.game.gamePrice))),e.xp6(2),e.Q6J("ngIf",t.game.stock),e.xp6(2),e.Q6J("max",5)("rate",t.rating)("readonly",!0),e.xp6(2),e.hij("(",t.nbRating," avis)"),e.xp6(4),e.Q6J("ngClass",t.input?"clamp":"text"),e.xp6(1),e.hij(" ",t.game.gameDescr," "),e.xp6(13),e.hij("",t.game.minAge," ans"),e.xp6(2),e.hij(" ",t.game.minPlayer?t.game.minPlayer>1?"Nombre de joueurs":"Nombre de joueur":"Nombre de joueur non sp\xe9cifi\xe9"," "),e.xp6(2),e.AsE(" ",t.game.minPlayer," \xe0 ",t.game.maxPlayer," "),e.xp6(4),e.hij(" ",t.game.editor.name," "),e.xp6(5),e.Oqu(t.game.type.name),e.xp6(2),e.hij(" ",t.game.languages?t.game.languages.length>1?"Langues":"Langue":""," : "),e.xp6(2),e.Q6J("ngForOf",t.game.languages),e.xp6(2),e.hij(" ",t.game.tags?t.game.tags.length>1?"Cat\xe9gories":"Cat\xe9gorie":""," : "),e.xp6(2),e.Q6J("ngForOf",t.game.languages),e.xp6(2),e.hij(" ",t.game.tags?t.game.tags.length>1?"Cat\xe9gories":"Cat\xe9gorie":""," : "),e.xp6(2),e.Q6J("ngForOf",t.game.tags),e.xp6(3),e.Q6J("ngIf",!t.isConnected()),e.xp6(1),e.Q6J("ngIf",!t.checkIfOrdered()&&t.isConnected()),e.xp6(1),e.Q6J("ngIf",t.checkIfOrdered()&&t.checkAlreadyCommented()&&t.isConnected()),e.xp6(1),e.Q6J("ngIf",t.checkIfOrdered()&&!t.checkAlreadyCommented()&&t.isConnected()),e.xp6(1),e.Q6J("commentaries",t.commentaries)}}(0,d.qS)(C,"fr");let q=(()=>{var n;class c{constructor(t,r,u,O,y,X,V,ee,te){this.gameService=t,this.customerService=r,this.route=u,this.router=O,this.cartService=y,this.getService=X,this.authService=V,this.toastrService=ee,this.fileService=te,this.input=!0,this.commentaries=[],this.orders=[],this.isGameLiked=!1,this.errorMessage="",this.rating=0,this.nbRating=0,this.image=""}ngOnInit(){this.authService.isAuth.value&&this.customerService.getOrders().subscribe({next:r=>{this.orders=r}}),this.getService.getData("/product/"+this.gameService.getSelectedGameId()+"/comments").subscribe({next:r=>{this.commentaries=r,this.setRating()}});const t=this.gameService.getSelectedGameId();this.currentWindowWidth=window.innerWidth,t&&this.gameService.getGameById(t).subscribe({next:r=>{this.game=r,this.fileService.getFile(this.game.image).subscribe({next:u=>this.image=URL.createObjectURL(u)}),this.getService.getData(`/product/game/${t}`).subscribe({next:u=>{this.game=u,this.authService.isAuth.value&&this.getService.getData("/customer/me/favs").subscribe({next:O=>{this.isGameLiked=O.some(y=>y.gameId===t)}})}})}})}onResize(){this.currentWindowWidth=window.innerWidth}addToCart(){const t=this.cartService.addItem(this.game);t.success?(this.toastrService.success(t.message),this.router.navigate(["/"])):this.toastrService.error(t.message)}addToFavorites(t){this.isGameLiked=!0,this.customerService.addToFavorites({id:t.gameId}).subscribe({next:()=>this.toastrService.success("Le jeu \xe0 \xe9t\xe9 ajouter avec succ\xe8s"),error:()=>this.toastrService.error("erreur lors de l'ajout au favoris")})}removeToFavorites(t){this.isGameLiked=!1,this.customerService.removeToFavorites({id:t.gameId}).subscribe({next:()=>this.toastrService.success("Le jeu \xe0 \xe9t\xe9 supprim\xe9 de vos favoris avec succ\xe8s"),error:()=>this.toastrService.error("erreur lors de la suppression")})}checkAlreadyCommented(){if(!this.authService.isAuth.value)return!1;for(const t of this.commentaries)if(t.customer.email===sessionStorage.getItem("subject")||t.customer.email===localStorage.getItem("subject"))return!0;return!1}checkIfOrdered(){for(const t of this.orders)for(const r of t.games)if(r.gameId==this.game.gameId)return!0;return!1}setRating(){let t=0,r=0;for(const u of this.commentaries)null!==u.rating&&(t+=u.rating,r++);this.rating=t/r,this.nbRating=r}isConnected(){return this.authService.isAuth.value}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(g.h),e.Y36(p.v),e.Y36(l.gz),e.Y36(l.F0),e.Y36(m.V),e.Y36(i.t),e.Y36(_.e),e.Y36(v._W),e.Y36(T.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-product-page"]],hostBindings:function(t,r){1&t&&e.NdJ("resize",function(){return r.onResize()},!1,e.Jf7)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-product"],["class","head-mobile",4,"ngIf"],[1,"product-flex"],["alt","exemple d'un jeu de soci\xe9t\xe9",3,"src"],[1,"detail-product"],["title","title-product",4,"ngIf"],[4,"ngIf","ngIfElse"],["isNotAuthenticated",""],[1,"price"],["class","stock",4,"ngIf"],[1,"notice"],[3,"max","rate","readonly","rateChange"],[1,"total-notice"],["classBtn","btn btn-add","textBtn","Ajouter au panier",3,"click"],[3,"ngClass"],[1,"game-details-container"],[1,"game-details-table"],["colspan","2",1,"game-details-header"],[1,"game-details-left"],[1,"game-details-label"],[1,"game-details-content"],[1,"game-details-right"],[4,"ngFor","ngForOf"],[3,"commentaries"],[1,"head-mobile"],["routerLink","",1,"head-icon"],["size","20","name","bootstrapArrowReturnLeft"],[1,"title-product"],["title","title-product"],["size","25","name","bootstrapHeartFill",3,"click",4,"ngIf"],["size","25","color","#FF0000","name","bootstrapHeartFill",3,"click",4,"ngIf"],["size","25","name","bootstrapHeartFill",3,"click"],["size","25","color","#FF0000","name","bootstrapHeartFill",3,"click"],[1,"stock"],[3,"gameId"]],template:function(t,r){1&t&&e.YNc(0,H,68,38,"ng-container",0),2&t&&e.Q6J("ngIf",r.game)},dependencies:[d.mk,d.sg,d.O5,l.rH,I.H,M.OC,b.Fv,E,F,d.H9],styles:[".container-product[_ngcontent-%COMP%]{margin:auto;max-width:80%;display:flex;flex-direction:column;text-align:center}.container-product[_ngcontent-%COMP%]   .head-mobile[_ngcontent-%COMP%]{display:flex;align-items:center;height:3rem}.container-product[_ngcontent-%COMP%]   .head-mobile[_ngcontent-%COMP%]   .head-icon[_ngcontent-%COMP%]{margin-right:1rem}.container-product[_ngcontent-%COMP%]   .head-mobile[_ngcontent-%COMP%]   .title-product[_ngcontent-%COMP%]{text-align:center;flex:1;position:absolute;left:50%;transform:translate(-50%);font-size:1.8rem;color:var(--blue-primary);font-weight:700}.container-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:400px}@media (min-width: 768px){.container-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}}.container-product[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--blue-primary);border-bottom:2px solid var(--blue-primary);font-size:1.5rem;margin:2rem 0;font-weight:700}.container-product[_ngcontent-%COMP%]   .product-flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;margin-top:1rem}@media (min-width: 768px){.container-product[_ngcontent-%COMP%]   .product-flex[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around;align-items:normal}}.container-product[_ngcontent-%COMP%]   .product-flex[_ngcontent-%COMP%]   .notice[_ngcontent-%COMP%]{display:flex;align-items:center}.container-product[_ngcontent-%COMP%]   .product-flex[_ngcontent-%COMP%]   .notice[_ngcontent-%COMP%]   ng-icon[_ngcontent-%COMP%]{font-size:1.5rem}.container-product[_ngcontent-%COMP%]   .product-flex[_ngcontent-%COMP%]   .notice[_ngcontent-%COMP%]   .total-notice[_ngcontent-%COMP%]{font-size:1rem;margin-left:.5rem}.container-product[_ngcontent-%COMP%]   .detail-product[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;gap:1rem}@media (min-width: 768px){.container-product[_ngcontent-%COMP%]   .detail-product[_ngcontent-%COMP%]{justify-content:space-around}}.container-product[_ngcontent-%COMP%]   .detail-product[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--blue-primary);font-weight:700}.container-product[_ngcontent-%COMP%]   .detail-product[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:var(--blue-primary);font-size:1.4rem}.container-product[_ngcontent-%COMP%]   .game-details-container[_ngcontent-%COMP%]{margin:1rem}.container-product[_ngcontent-%COMP%]   .game-details-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border:1px solid var(--blue-secondary)}.container-product[_ngcontent-%COMP%]   .game-details-header[_ngcontent-%COMP%]{background-color:var(--blue-primary);color:#fff;padding:10px;text-align:center}.container-product[_ngcontent-%COMP%]   .game-details-left[_ngcontent-%COMP%], .container-product[_ngcontent-%COMP%]   .game-details-right[_ngcontent-%COMP%]{padding:15px;border:1px solid var(--blue-secondary);display:flex;flex-direction:column;align-items:center;text-align:center;background-color:var(--whitegray);box-shadow:0 2px 4px #0000001a}@media (min-width: 768px){.container-product[_ngcontent-%COMP%]   .game-details-left[_ngcontent-%COMP%], .container-product[_ngcontent-%COMP%]   .game-details-right[_ngcontent-%COMP%]{width:47%;display:revert}}.container-product[_ngcontent-%COMP%]   .game-details-label[_ngcontent-%COMP%]{font-weight:700;padding:4px;color:var(--blue-primary)}.container-product[_ngcontent-%COMP%]   .game-details-content[_ngcontent-%COMP%]{padding:5px;color:var(--blue-secondary)}.in-stock[_ngcontent-%COMP%]{color:green}.low-stock[_ngcontent-%COMP%]{color:orange}.out-of-stock[_ngcontent-%COMP%]{color:red}.container[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.error-message[_ngcontent-%COMP%]{background-color:brown;color:#fff;padding:10px;border-radius:5px}.popup[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;align-items:center;justify-content:center}.show-popup[_ngcontent-%COMP%]{display:flex}.popup-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000004d;text-align:center}.popup-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;background-color:#007bff;color:#fff;border-radius:3px;cursor:pointer;margin-top:10px}.popup-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}ngb-rating[_ngcontent-%COMP%]{color:#ffc107;font-size:30px}"]}),c})()}}]);